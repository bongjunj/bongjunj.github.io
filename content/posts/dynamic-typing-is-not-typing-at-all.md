---
title: "Dynamic Type System Is Not A Type System At All"
date: 2025-08-24T13:03:23+09:00
draft: true
---

최근 파이썬을 위한 타입 검사기들이 속속 등장하고 있다.
파이썬이 점차 대규모 프로그램 개발에 사용되면서, 미처 포착하지 못하는 프로그램 오류들을
사전에 방지하기 위한 기술이 필요해지고 있기 때문이다.
타입 검사기는 그 중에서도 실행 중 타입 오류를 예방하는 일을 한다.
대표적인 파이썬 타입 검사기인 [PyRight](https://github.com/microsoft/pyright/blob/main/README.md)의 설명을 읽어보면
파이썬을 위한 **정적** 타입 검사기 (static type checker)라고 소개하고 있다.

하지만 **동적** 타입 언어의 **정적** 타입 검사기는 도대체 무슨 뜻일까?
곰곰히 생각해보면 동적 타입 언어는 그 뜻부터 모호하다.
타입 검사란 프로그램 실행 전에 프로그램에 타입 오류가 없음을 증명하는 과정이다.
정적 타입 언어에서는 프로그램에 적힌 타입에 프로그램이 속하는지 확인함으로써 이를 증명한다.
타입 추론 (Type Inference) 과정을 통해 프로그램이 타입이 적혀져 있지 않더라도
타입을 자동으로 알아낼 수도 있다.
이 과정에서도 프로그램이 정해진 "타입"에 속하는지 확인하는 과정은 달라지지 않는다.

그런데 동적 타입 언어에서 타입 검사 실패란 더 이상 연산이 정의되지 않은 상태에 도달하는 것에 불과하다.
생각해보면, 이는 Untyped λ-calculus의 연산 실패과 정확히 같다.
Untyped λ-calculus에서는 `1 + "hello"`처럼 연산이 정의되지 않은 경우, 계산이 멈추기 때문이다.

동적 타입 언어는 이처럼 연산이 정의되지 않았다는 것을 어떻게 알까?
이 언어들은 값에 "타입"이라 불리는 값을 하나 덧붙인다.
예를 들어 정수 `1`은 `(1, int)`로 표현되고, 문자열 `"hello"`는 `("hello", str)`로 표현된다.
여기서 `1 + "hello"`을 계산하려면 `int`와 `str` 사이에 정의된 덧셈 연산이 있어야 하는데,
그런 연산이 없어 타입 오류를 내는 것이다.

동적 타입 언어의 값을 수학적으로 정리해보면 다음과 같다.
프로그램의 값 $\mathbb{V}$에 타입 정보 $\mathbb{T}$를 덧붙인 것과 같다.

$$
\mathbb{V'} = \mathbb{V} \times \mathbb{T} \\
\mathbb{T} = \{~\text{int},~\text{float},~\text{str}~\}
$$

이런 언어에서 실행 중에 타입 오류가 없음을 유한 시간 안에, 자동으로 증명하는 것이
바로 파이썬 정적 타입 검사기가 하고자 하는 것이다.
다시 말해, $\mathbb{V'}$을 이용해 요약 해석(Abstract Interpretation)하는 것이다.
오탐(False Alarm) 같은 요약 해석의 현상이 파이썬 정적 타입 검사기에 나타나는 것은 이 때문이다.

이쯤되면 동적 타입 언어의 "타입"이란 이론적으로 정립된 타입 이론의 타입과는 전혀 다른 개념임을 알 수 있다. 전혀 다른 개념을 같은 "타입"으로 부르고 있으니 혼란이 가중되는 것은 당연하다.
동적 "타입"이라 부르지 말고 더 정확한 용어가 필요하지 않을까.
